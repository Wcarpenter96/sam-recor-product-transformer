from typing import Dict, List

from recor_layer.requests.iml.iml_get_category_list_request import (
    ImlGetCategoryListRequest,
)
from recor_layer.requests.iml.iml_get_item_info_request import ImlGetItemInfoRequest
from requests import Response


class ImlService:
    """Handles interactions with the IML API."""

    def __init__(self):
        """Initializes the ImlService with request objects."""
        self.get_category_list_request = ImlGetCategoryListRequest()
        self.get_item_info_request = ImlGetItemInfoRequest()

    def get_category_list(self, request_data: Dict = {}) -> List[Dict]:
        """
        Retrieves a list of categories from the IML API.

        Args:
            request_data: Optional dictionary containing any specific parameters
                          required by the IML get category list API.

        Returns:
            A list of dictionaries, where each dictionary represents an IML category.
        """
        return self.get_category_list_request.run(request_data)

    def get_item_info(self, counter: int) -> Response:
        """
        Retrieves item information from the IML API.

        Args:
            counter: The counter value to use in the request.

        Returns:
            The response object from the IML request.
        """
        return self.get_item_info_request.run(counter)
